@model IEnumerable<ChatManager.Models.Message>

@{
    ViewBag.Title = "Conversations";
}

<h2>Conversations</h2>
<hr />

<div class="main">
    <div id="MessagesContainer">
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/NotificationsHandler")

    <script defer>
        let messagesList = new PartialRefresh("@Url.Action("GetMessagesList")", "MessagesContainer", 5, UpdateMessagesCallback);

        function UpdateMessagesCallback() {
            $(".command").click(function () {
                var url = $(this).attr("url");
                var message = $(this).attr("message");
                messagesList.confirmedCommand(message, url);
            });
        }
    </script>
}
